!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ual=t():e.ual=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=41)}([function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e){return Array.isArray(e)?e:Array.from(e)}function i(e){return Object.prototype.toString.call(e).slice(8,-1)}function u(e,t){return null!=t&&i(t)===e}function a(e){return u("Object",e)}function l(e){return u("Array",e)}function c(e){return u("String",e)}function f(e){return Math.abs(e)===1/0}function s(e){return u("Number",e)&&!g(e)&&!f(e)}function d(e){return u("Boolean",e)}function p(e){return u("Map",e)}function y(e){return null===e}function v(e){return void 0===e}function g(e){return!("object"!==(void 0===e?"undefined":r(e))||!u("Number",e)||!isNaN(e))||u("Number",e)&&e!=e}function h(e){return""+e}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s(e=Number(e))?e:t}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e=b(e,t))===t?e:parseInt(e)}function w(e){var t=o(e.split("#")[0].split("?")).slice(1);return 0===t.length?null:t.join("?")}t.default={getType:i,is:u,isObject:a,isArray:l,isString:c,isNumber:s,isBoolean:d,isMap:p,isPrimitive:function(e){return s(e)||c(e)||d(e)},isFunction:function(e){return u("Function",e)},isNull:y,isNaN:g,isUndefined:v,findKey:function(e,t){return u("Object",e)&&e.hasOwnProperty(t)},isUUID:function(e){return!!c(e)&&null!==e.match(/^[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}$/)},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},merge:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,o={},i=function(e){var n=t[e];Object.keys(n).forEach(function(e){o[e]=n[e]})},u=0;u<r;u++)i(u);return o},getTime:function(){return(new Date).getTime()},normalizeToString:h,normalizeToNumber:b,normalizeToInt:m,normalizeToUnsignedInt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e=m(e,t))===t?e:e>=0?e:t},isEmpty:function(e){return!!(y(e)||v(e)||g(e))||(c(e)?""===e:s(e)||f(e)?0===e:a(e)?0===Object.keys(e).length:l(e)?0===e.length:!!p(e)&&0===e.size)},snakeToLCC:function(e){return(e=h(e).replace(/_+([a-z])/g,function(e,t){return t.toUpperCase()})).charAt(0).toLowerCase()+e.slice(1)},urlQueryBuild:function(e){var t="";return a(e)&&(t=Object.keys(e).map(function(t){return[t,e[t]].map(h).map(encodeURIComponent).join("=")}).join("&")),t},urlQueryString:w,urlQueryParse:function(e){var t=w("?"+e);return null===t?null:t.split("&").reduce(function(e,t){var n=o(t.split("=")),r=n[0],i=n.slice(1);return 1===i.length&&(e[r]=i[0]),e},{})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=t.Util=t.CLog=void 0;var r=u(n(2)),o=u(n(0)),i=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}t.CLog=r.default,t.Util=o.default,t.Browser=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),u=(r=i)&&r.__esModule?r:{default:r};function a(){return["Object","Console"].indexOf(u.default.getType(console))>=0?console:{}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"debug",value:function(){var t=a();if(this.logLevel>=e.DEBUG){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.debug)?this.printLog(t.debug,r):u.default.isFunction(t.log,r)&&(r.unshift("[DEBUG]"),this.printLog(t.log,r))}}},{key:"info",value:function(){var t=a();if(this.logLevel>=e.INFO){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.info)?this.printLog(t.info,r):u.default.isFunction(t.log,r)&&(r.unshift("[INFO]"),this.printLog(t.log,r))}}},{key:"warning",value:function(){var t=a();if(this.logLevel>=e.WARNING){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.warn)?this.printLog(t.warn,r):u.default.isFunction(t.log,r)&&(r.unshift("[WARN]"),this.printLog(t.log,r))}}},{key:"error",value:function(){var t=a();if(this.logLevel>=e.CRITICAL){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.error)?this.printLog(t.error,r):u.default.isFunction(t.log,r)&&(r.unshift("[ERROR]"),this.printLog(t.log,r))}}},{key:"printLog",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],i=new Date;o.unshift("["+i.toLocaleTimeString()+"."+i.getUTCMilliseconds()+"]"),u.default.isEmpty(this._prefix)||o.unshift(this._prefix),r.apply(console,o)}},{key:"NONE",get:function(){return 0}},{key:"CRITICAL",get:function(){return 1}},{key:"WARNING",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"prefix",set:function(e){this._prefix=e}},{key:"defaultLogLevel",get:function(){return this.CRITICAL}},{key:"logLevel",get:function(){return u.default.isNumber(this._logLevel)?this._logLevel:this.defaultLogLevel},set:function(e){u.default.isNumber(e)&&[0,1,2,3,4].indexOf(e)>=0&&(this._logLevel=e)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),u=(r=i)&&r.__esModule?r:{default:r};t.default={generateMetrics:function(e,t){if("object"!==(void 0===e?"undefined":o(e)))return null;var n={},r=e.line||e.lineNumber,i=e.column||e.columnNumber;n.ts=u.default.getTime(),e.name&&(n.name=e.name),e.message&&(n.message=e.message),e.stack&&(n.stack=e.stack),r&&(n.line=r),i&&(n.col=i);var a="undefined"!=typeof window?window:{};return"object"===o(a.performance)&&"object"===o(a.performance.timing)&&u.default.isNumber(a.performance.timing.navigationStart)&&(n.progress_time=n.ts-a.performance.timing.navigationStart),n.ex_base="",void 0!==a.location&&void 0!==a.location.href&&(n.url=a.location.href),u.default.isString(t)&&(n.label=t),n},createImageTag:function(e,t){var n=document.createElement("img");u.default.isFunction(t)&&(n.onload=t),n.src=e}}}])},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e){return Array.isArray(e)?e:Array.from(e)}function i(e){return Object.prototype.toString.call(e).slice(8,-1)}function u(e,t){return null!=t&&i(t)===e}function a(e){return u("Object",e)}function l(e){return u("Array",e)}function c(e){return u("String",e)}function f(e){return Math.abs(e)===1/0}function s(e){return u("Number",e)&&!g(e)&&!f(e)}function d(e){return u("Boolean",e)}function p(e){return u("Map",e)}function y(e){return null===e}function v(e){return void 0===e}function g(e){return!("object"!==(void 0===e?"undefined":r(e))||!u("Number",e)||!isNaN(e))||u("Number",e)&&e!=e}function h(e){return""+e}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s(e=Number(e))?e:t}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e=b(e,t))===t?e:parseInt(e)}function w(e){var t=o(e.split("#")[0].split("?")).slice(1);return 0===t.length?null:t.join("?")}t.default={getType:i,is:u,isObject:a,isArray:l,isString:c,isNumber:s,isBoolean:d,isMap:p,isPrimitive:function(e){return s(e)||c(e)||d(e)},isFunction:function(e){return u("Function",e)},isNull:y,isNaN:g,isUndefined:v,findKey:function(e,t){return u("Object",e)&&e.hasOwnProperty(t)},isUUID:function(e){return!!c(e)&&null!==e.match(/^[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}$/)},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},merge:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,o={},i=function(e){var n=t[e];Object.keys(n).forEach(function(e){o[e]=n[e]})},u=0;u<r;u++)i(u);return o},getTime:function(){return(new Date).getTime()},normalizeToString:h,normalizeToNumber:b,normalizeToInt:m,normalizeToUnsignedInt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e=m(e,t))===t?e:e>=0?e:t},isEmpty:function(e){return!!(y(e)||v(e)||g(e))||(c(e)?""===e:s(e)||f(e)?0===e:a(e)?0===Object.keys(e).length:l(e)?0===e.length:!!p(e)&&0===e.size)},snakeToLCC:function(e){return(e=h(e).replace(/_+([a-z])/g,function(e,t){return t.toUpperCase()})).charAt(0).toLowerCase()+e.slice(1)},urlQueryBuild:function(e){var t="";return a(e)&&(t=Object.keys(e).map(function(t){return[t,e[t]].map(h).map(encodeURIComponent).join("=")}).join("&")),t},urlQueryString:w,urlQueryParse:function(e){var t=w("?"+e);return null===t?null:t.split("&").reduce(function(e,t){var n=o(t.split("=")),r=n[0],i=n.slice(1);return 1===i.length&&(e[r]=i[0]),e},{})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=t.Util=t.CLog=void 0;var r=u(n(2)),o=u(n(0)),i=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}t.CLog=r.default,t.Util=o.default,t.Browser=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),u=(r=i)&&r.__esModule?r:{default:r};function a(){return["Object","Console"].indexOf(u.default.getType(console))>=0?console:{}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"debug",value:function(){var t=a();if(this.logLevel>=e.DEBUG){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.debug)?this.printLog(t.debug,r):u.default.isFunction(t.log,r)&&(r.unshift("[DEBUG]"),this.printLog(t.log,r))}}},{key:"info",value:function(){var t=a();if(this.logLevel>=e.INFO){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.info)?this.printLog(t.info,r):u.default.isFunction(t.log,r)&&(r.unshift("[INFO]"),this.printLog(t.log,r))}}},{key:"warning",value:function(){var t=a();if(this.logLevel>=e.WARNING){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.warn)?this.printLog(t.warn,r):u.default.isFunction(t.log,r)&&(r.unshift("[WARN]"),this.printLog(t.log,r))}}},{key:"error",value:function(){var t=a();if(this.logLevel>=e.CRITICAL){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];u.default.isFunction(t.error)?this.printLog(t.error,r):u.default.isFunction(t.log,r)&&(r.unshift("[ERROR]"),this.printLog(t.log,r))}}},{key:"printLog",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],i=new Date;o.unshift("["+i.toLocaleTimeString()+"."+i.getUTCMilliseconds()+"]"),u.default.isEmpty(this._prefix)||o.unshift(this._prefix),r.apply(console,o)}},{key:"NONE",get:function(){return 0}},{key:"CRITICAL",get:function(){return 1}},{key:"WARNING",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"prefix",set:function(e){this._prefix=e}},{key:"defaultLogLevel",get:function(){return this.CRITICAL}},{key:"logLevel",get:function(){return u.default.isNumber(this._logLevel)?this._logLevel:this.defaultLogLevel},set:function(e){u.default.isNumber(e)&&[0,1,2,3,4].indexOf(e)>=0&&(this._logLevel=e)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),u=(r=i)&&r.__esModule?r:{default:r};t.default={generateMetrics:function(e,t){if("object"!==(void 0===e?"undefined":o(e)))return null;var n={},r=e.line||e.lineNumber,i=e.column||e.columnNumber;n.ts=u.default.getTime(),e.name&&(n.name=e.name),e.message&&(n.message=e.message),e.stack&&(n.stack=e.stack),r&&(n.line=r),i&&(n.col=i);var a="undefined"!=typeof window?window:{};return"object"===o(a.performance)&&"object"===o(a.performance.timing)&&u.default.isNumber(a.performance.timing.navigationStart)&&(n.progress_time=n.ts-a.performance.timing.navigationStart),n.ex_base="",void 0!==a.location&&void 0!==a.location.href&&(n.url=a.location.href),u.default.isString(t)&&(n.label=t),n},createImageTag:function(e,t){var n=document.createElement("img");u.default.isFunction(t)&&(n.onload=t),n.src=e}}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(7),u=(r=i)&&r.__esModule?r:{default:r},a={},l={get:function(e){return void 0!==a[e]?a[e]:null},set:function(e,t){a[e]=t,"apiHost"===e&&"https://"===a.apiScheme&&(0,u.default)(""+a.apiScheme+a.apiHost)}};l.set("apiScheme","https://"),l.set("apiHost","dsb.yahoo.co.jp"),l.set("apiPath","/api/v1/stream"),l.set("apiPathSendBeacon","/api/v1/stream_nct"),l.set("sendBeaconEnabled",!0),l.set("ajaxTimeout",5e3),l.set("clientIdSize","'token':'01234567-0123-0123-0123-0123456789AB',".length),l.set("wrapJsonSize","{'r':[]}".length),l.set("maxRequestRecordsLength",65536-4*(l.get("clientIdSize")-l.get("wrapJsonSize"))),l.set("shortTimerInterval",1e3),l.set("longTimerInterval",5e3),o.CLog.debug("[config]",l),t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3),i=(r=o)&&r.__esModule?r:{default:r},u=n(0),a="undefined"!=typeof window?window:{};a.YAS=a.YAS||{};var l=a.YAS;u.Util.isUndefined(l.CoreLogger)?l.CoreLogger=i.default:l.CoreLogger.compatNumber<i.default.compatNumber?(l.CoreLogger.flush(),l.CoreLogger.destroy(),l.CoreLogger=i.default):i.default.destroy(),t.default=l.CoreLogger},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=f(n(4)),u=f(n(5)),a=f(n(9)),l=f(n(1)),c=f(n(10));function f(e){return e&&e.__esModule?e:{default:e}}var s=new u.default,d=new a.default(s),p=(0,i.default)();o.CLog.prefix="[CoreLogger]";var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"setConsoleLogLevel",value:function(e){o.CLog.logLevel=e}},{key:"getConsoleLogLevel",value:function(){return o.CLog.logLevel}},{key:"setBeaconServer",value:function(e){o.Util.isString(e)&&(l.default.set("apiHost",e),o.CLog.info("[送信先変更]",e))}},{key:"enableSecureTransport",value:function(e){!0===e?l.default.set("apiScheme","https://"):!1===e&&(l.default.set("apiScheme","http://"),o.CLog.warning("通信にHTTPを利用します"))}},{key:"enableSendBeacon",value:function(e){!0===e?(l.default.set("sendBeaconEnabled",!0),o.CLog.info("通信にsendBeaconまたはXHRを利用します")):!1===e?(l.default.set("sendBeaconEnabled",!1),o.CLog.info("通信にsendBeaconを利用せずXHRのみ利用します")):o.CLog.warning("boolean型の値を指定してください")}},{key:"send",value:function(e){o.Util.isObject(e)?(s.push(e.token,e.project,e.dataset,e.data),o.Util.isUndefined(e.flush)||o.Util.isBoolean(e.flush)||o.CLog.warning("flushオプションが期待するのはboolean型です"),o.Util.isUndefined(e.async)||o.Util.isBoolean(e.async)||o.CLog.warning("asyncオプションが期待するのはboolean型です"),!0===e.flush?this.flush(e.callback,e.async):d.setTimer()):o.CLog.error("引数の型が不正")}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.Util.isFunction(e)?s.send(e,t):(o.Util.isNull(e)||o.CLog.warning("callbackには関数を指定してください"),s.send())}},{key:"getSdkName",value:function(){return c.default.name}},{key:"getSdkVersion",value:function(){return c.default.version}},{key:"getPageSession",value:function(){return p}},{key:"destroy",value:function(){o.CLog.debug("[バッファ削除]",s.queue),d.destroy(),s.queue=[],s.queueSize=0}},{key:"compatNumber",get:function(){return 2}}]),e}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=l(n(6)),u=l(n(8)),a=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queue=[],this.queueSize=0,this.sizeArray=[],this.online=!0}return r(e,[{key:"push",value:function(e,t,n,r){var i=u.default.recordsBuild(e,t,n,r),l=JSON.stringify(i).length;if(!(i.length<1))if(l>=a.default.get("maxRequestRecordsLength"))o.CLog.error("データのサイズが大きすぎます "+l+"/"+a.default.get("maxRequestRecordsLength"),i);else if(this.queueSize+l<a.default.get("maxRequestRecordsLength"))this.sizeArray.push(l),this.queue=this.queue.concat(i),this.queueSize+=l;else if(this.online)this.send(),this.sizeArray.push(l),this.queueSize+=l,this.queue=this.queue.concat(i);else{this.sizeArray.push(l),this.queue=this.queue.concat(i),this.queueSize+=l;for(var c=this.sizeArray.length-1,f=0;c>=0;c--)if((f+=this.sizeArray[c])>=a.default.get("maxRequestRecordsLength")){for(var s=0;s<=c;s++)o.CLog.warning("データ容量超過のため削除",this.queue[0]),this.queueSize-=this.sizeArray[0],this.queue.shift(),this.sizeArray.shift();break}}}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.queue.length>0&&this.online){var n=u.default.requestBodyBuild(this.queue);this.queue=[],this.queueSize=0,this.sizeArray=[],i.default.send(n,e,t)}}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(1),l=(r=a)&&r.__esModule?r:{default:r},c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="undefined"!=typeof window?window:{};l.default.get("sendBeaconEnabled")&&u.Util.isNull(t)&&n&&"object"===o(r.navigator)&&u.Util.isFunction(r.navigator.sendBeacon)?this.sendBeacon(e):this.sendAjax(e,t,n)}},{key:"sendAjax",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(){var e=null;if("undefined"==typeof XMLHttpRequest)return null;try{if(!("withCredentials"in(e=new XMLHttpRequest)))return null;if("undefined"!=typeof XDomainRequest)return null}catch(e){return u.CLog.error("XMLHttpRequestオブジェクトの作成に失敗",e),null}return e}(),o=""+l.default.get("apiScheme")+l.default.get("apiHost")+l.default.get("apiPath"),i=function(){u.Util.isFunction(t)&&t()};u.Util.isNull(r)||(r.open("POST",o,n),r.withCredentials=!0,r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n&&("timeout"in r||!l.default.get("ajaxTimeout")?r.timeout=l.default.get("ajaxTimeout"):setTimeout(function(){r.abort(),i()},l.default.get("ajaxTimeout"))),r.onload=r.ontimeout=r.onerror=r.onabort=i,r.send(e),u.CLog.info("[送信]",o,e))}},{key:"sendBeacon",value:function(e){var t=""+l.default.get("apiScheme")+l.default.get("apiHost")+l.default.get("apiPathSendBeacon"),n=new Blob(["q="+encodeURIComponent(e)],{type:"application/x-www-form-urlencoded",host:l.default.get("apiHost")});navigator.sendBeacon(t,n),u.CLog.info("[送信]",t,e)}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"==typeof window||void 0===window.document)return!1;var t=document.createElement("link");return t.setAttribute("rel","preconnect"),t.setAttribute("href",e),document.head.appendChild(t),!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"recordBuild",value:function(e,t,n,r){if(!o.Util.isString(e)||!o.Util.isUUID(e))return o.CLog.error("tokenが不正な値:",e),null;if(!o.Util.isString(t)||t.length<1)return o.CLog.error("projectが不正な値:",t),null;if(!o.Util.isString(n)||n.length<1)return o.CLog.error("datasetが不正な値:",n),null;if(!o.Util.isObject(r))return o.CLog.error("dataが不正な値:",r),null;var i=o.Util.deepCopy(r);Object.keys(i).forEach(function(e){0===e.indexOf("cex_")&&(o.CLog.warning("パラメータ "+e+": cex_で始まるキーは予約済みキーのため使用できません."),delete i[e])}),i.cex_cqt=o.Util.getTime();var u={tk:e,p:t,d:n,data:i};return o.CLog.info("[レコード生成]",u),u}},{key:"recordsBuild",value:function(e,t,n,r){var i=this,u=[],a=function(r){var a=i.recordBuild(e,t,n,r);o.Util.isNull(a)||u.push(a)};return o.Util.isObject(r)?a(r):o.Util.isArray(r)&&r.forEach(a),u}},{key:"requestBodyBuild",value:function(e){var t={},n=o.Util.deepCopy(e);return t.cex_cst=o.Util.getTime(),JSON.stringify({r:n,bp:t})}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(1),l=(r=a)&&r.__esModule?r:{default:r},c=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buffer=t,this.shortInterval=o||l.default.get("shortTimerInterval"),this.longInterval=r||l.default.get("longTimerInterval"),this.shortTimer=null,this.longTimer=null,this.leaveCallback=function(e){u.CLog.debug("fire inactive event. type = "+e.type),n.buffer.queue.length>0&&(n.buffer.send(),n.clearAllTimer())};var i="undefined"!=typeof window?window:{};this.destroy=function(){u.Util.isFunction(i.removeEventListener)&&(e.INACTIVE_EVENTS.forEach(function(e){i.removeEventListener(e,n.leaveCallback,!1)}),i.removeEventListener("online",n.onlineHandler,!1),i.removeEventListener("offline",n.offlineHandler,!1))},u.Util.is("Window",i)&&u.Util.isFunction(i.addEventListener)?e.INACTIVE_EVENTS.forEach(function(e){i.addEventListener(e,n.leaveCallback,!1)}):u.CLog.warning("not hook a leave event."),this.createNetWorkStateHandler(),this.setInitialNetWork(),this.setNetWorkWatcher()}return i(e,null,[{key:"INACTIVE_EVENTS",get:function(){return["blur","pagehide","visibilitychange-hidden","beforeunload","unload"]}}]),i(e,[{key:"createNetWorkStateHandler",value:function(){var e=this;this.onlineHandler=function(){e.buffer.online=!0,e.buffer.queue.length>0&&e.buffer.send()},this.offlineHandler=function(){e.buffer.online=!1}}},{key:"setInitialNetWork",value:function(){var e="undefined"!=typeof window?window:{};u.Util.is("Window",e)&&"object"===o(e.navigator)&&u.Util.isBoolean(e.navigator.onLine)?this.buffer.online=e.navigator.onLine:this.buffer.online=!0}},{key:"setNetWorkWatcher",value:function(){var e="undefined"!=typeof window?window:{};u.Util.isFunction(e.addEventListener)&&(e.addEventListener("online",this.onlineHandler,!1),e.addEventListener("offline",this.offlineHandler,!1))}},{key:"setTimer",value:function(){var e=this;u.Util.isNull(this.shortTimer)||(clearTimeout(this.shortTimer),this.shortTimer=null),this.shortTimer=setTimeout(function(){e.buffer.send(),e.clearAllTimer(),u.CLog.debug("Called: short timer fire.")},this.shortInterval),u.Util.isNull(this.longTimer)&&(this.longTimer=setTimeout(function(){e.buffer.send(),e.clearAllTimer(),u.CLog.debug("Called: long timer fire.")},this.longInterval))}},{key:"clearAllTimer",value:function(){clearTimeout(this.shortTimer),clearTimeout(this.longTimer),this.shortTimer=null,this.longTimer=null}}]),e}();t.default=c},function(e){e.exports={name:"YASCoreLogger-web",version:"1.2.5"}}])},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e){e.exports={a:"YASUserActionLogger-web",b:"2.2.0"}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(27),o=n(31);e.exports=n(8)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=!n(9)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(3),o=n(20),i=n(13);n(17)("search",1,function(e,t,n,u){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=u(n,e,this);if(t.done)return t.value;var a=r(e),l=String(this),c=a.lastIndex;o(c,0)||(a.lastIndex=0);var f=i(a,l);return o(a.lastIndex,c)||(a.lastIndex=c),null===f?-1:f.index}]})},function(e,t,n){"use strict";var r=n(21),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){var r=n(15)("wks"),o=n(16),i=n(2).Symbol,u="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=u&&i[e]||(u?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(6),o=n(2),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(23)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";n(24);var r=n(19),o=n(7),i=n(9),u=n(10),a=n(14),l=n(18),c=a("species"),f=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),s=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=a(e),p=!i(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),y=p?!i(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!t}):void 0;if(!p||!y||"replace"===e&&!f||"split"===e&&!s){var v=/./[d],g=n(u,d,""[e],function(e,t,n,r,o){return t.exec===l?p&&!o?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),h=g[0],b=g[1];r(String.prototype,e,h),o(RegExp.prototype,d,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},function(e,t,n){"use strict";var r,o,i=n(25),u=RegExp.prototype.exec,a=String.prototype.replace,l=u,c=(r=/a/,o=/b*/g,u.call(r,"a"),u.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=void 0!==/()??/.exec("")[1];(c||f)&&(l=function(e){var t,n,r,o,l=this;return f&&(n=new RegExp("^"+l.source+"$(?!\\s)",i.call(l))),c&&(t=l.lastIndex),r=u.call(l,e),c&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),f&&r&&r.length>1&&a.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r}),e.exports=l},function(e,t,n){var r=n(2),o=n(7),i=n(32),u=n(16)("src"),a=n(33),l=(""+a).split("toString");n(6).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(c&&(i(n,u)||o(n,u,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[u]||a.call(this)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var r=n(22),o=n(14)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r=n(18);n(26)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){"use strict";var r=n(3);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(2),o=n(6),i=n(7),u=n(19),a=n(34),l=function(e,t,n){var c,f,s,d,p=e&l.F,y=e&l.G,v=e&l.S,g=e&l.P,h=e&l.B,b=y?r:v?r[t]||(r[t]={}):(r[t]||{}).prototype,m=y?o:o[t]||(o[t]={}),w=m.prototype||(m.prototype={});for(c in y&&(n=t),n)s=((f=!p&&b&&void 0!==b[c])?b:n)[c],d=h&&f?a(s,r):g&&"function"==typeof s?a(Function.call,s):s,b&&u(b,c,s,e&l.U),m[c]!=s&&i(m,c,d),g&&w[c]!=s&&(w[c]=s)};r.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){var r=n(3),o=n(28),i=n(30),u=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(8)&&!n(9)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(5),o=n(2).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=n(15)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(35);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(3),o=n(37),i=n(38),u=n(11),a=n(39),l=n(13),c=Math.max,f=Math.min,s=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(17)("replace",2,function(e,t,n,y){return[function(r,o){var i=e(this),u=null==r?void 0:r[t];return void 0!==u?u.call(r,i,o):n.call(String(i),r,o)},function(e,t){var o=y(n,e,this,t);if(o.done)return o.value;var s=r(e),d=String(this),p="function"==typeof t;p||(t=String(t));var g=s.global;if(g){var h=s.unicode;s.lastIndex=0}for(var b=[];;){var m=l(s,d);if(null===m)break;if(b.push(m),!g)break;""===String(m[0])&&(s.lastIndex=a(d,i(s.lastIndex),h))}for(var w,S="",_=0,O=0;O<b.length;O++){m=b[O];for(var x=String(m[0]),k=c(f(u(m.index),d.length),0),U=[],C=1;C<m.length;C++)U.push(void 0===(w=m[C])?w:String(w));var j=m.groups;if(p){var L=[x].concat(U,k,d);void 0!==j&&L.push(j);var T=String(t.apply(void 0,L))}else T=v(x,d,k,U,j,t);k>=_&&(S+=d.slice(_,k)+T,_=k+x.length)}return S+d.slice(_)}];function v(e,t,r,i,u,a){var l=r+e.length,c=i.length,f=p;return void 0!==u&&(u=o(u),f=d),n.call(a,f,function(n,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":a=u[o.slice(1,-1)];break;default:var f=+o;if(0===f)return n;if(f>c){var d=s(f/10);return 0===d?n:d<=c?void 0===i[d-1]?o.charAt(1):i[d-1]+o.charAt(1):n}a=i[f-1]}return void 0===a?"":a})}})},function(e,t,n){var r=n(10);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(11),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=n(40)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(11),o=n(10);e.exports=function(e){return function(t,n){var i,u,a=String(o(t)),l=r(n),c=a.length;return l<0||l>=c?e?"":void 0:(i=a.charCodeAt(l))<55296||i>56319||l+1===c||(u=a.charCodeAt(l+1))<56320||u>57343?e?a.charAt(l):i:e?a.slice(l,l+2):u-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";n.r(t);var r=n(0),o={string:function(e){return r.Util.normalizeToString(e)},number:function(e){return r.Util.normalizeToNumber(e,null)},boolean:function(e){return Boolean(e)},array:function(e){return r.Util.isArray(e)?e:null}},i=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},u=function(e,t){var n=t[0],i=t[1],u=t[2],a=function(e,t){return r.Util.isUndefined(t)||r.Util.isNull(t)||r.Util.isUndefined(o[e])?null:o[e](t)}(u,i);return r.Util.isNull(a)?(r.CLog.warning("[Validator#run] ".concat(n,"に").concat(u,"型に変換出来ない値(").concat(i,")が指定されています")),e):(e[n]=a,e)},a={ruleSets:{},aliasMap:{},addRuleSet:function(e,t){var n=this;if(r.Util.isString(e)&&!r.Util.isEmpty(e))if(r.Util.isObject(t)){var o=i(t).reduce(function(e,o){var i=t[o];return r.Util.isUndefined(i.alias)||(n.aliasMap[i.alias]=o),e[o]={type:i.type},e},{});this.ruleSets[e]=o}else r.CLog.error("[Validator#addRule] 不正なRuleSet",t);else r.CLog.error("[Validator#addRule] 不正なアクションID",e)},run:function(e,t){var n=this;if(!r.Util.isString(e)||r.Util.isEmpty(e))return r.CLog.error("[Validator#run] アクションIDが不正",e),null;if(r.Util.isUndefined(this.ruleSets[e]))return r.CLog.error("[Validator#run] アクション ".concat(e," に紐付くルールセットが未登録"),this.ruleSets),null;if(!r.Util.isObject(t))return r.CLog.error("[Validator#run] データの形式が不正",t),null;var o=this.ruleSets[e],a=i(o);return i(t).map(function(e){var r=n.aliasMap[e]||e;return-1!==a.indexOf(r)?[r,t[e],o[r].type]:null}).filter(r.Util.isArray).reduce(u,{})}},l=(n(12),{viewStart:{list:"view_content_list_start",detail:"view_content_detail_start",digest:"view_content_digest_start"},viewEnd:{list:"view_content_list_end",detail:"view_content_detail_end",digest:"view_content_digest_end"},flow:"go_to_content",pageview:"pageview",cv:"cv",search:"search"}),c={ts:{type:"number"},action_id:{type:"string"},content_id:{type:"string",alias:"contid"},id_type:{type:"string",alias:"idtype"},page_session:{type:"string"},url:{type:"string"},service:{type:"string"},apptype:{type:"string"},opttype:{type:"string"},os:{type:"string"},sdk:{type:"string"},sdk_ver:{type:"string"},extension:{type:"string"},extension_ver:{type:"string"},mtestid:{type:"string"},ss_join_id:{type:"string"},ss_join_id_type:{type:"string"},referer:{type:"string"}},f={element_id:{type:"string"}},s=r.Util.merge({},f),d=r.Util.merge({start_time:{type:"number"},end_time:{type:"number"},view_time:{type:"number"},view_rate:{type:"number"}},f),p={viewable_time:{type:"number"}},y={current_page:{type:"number"}},v=r.Util.merge({total_page:{type:"number"}},y),g={},h={list:r.Util.merge(d,p),detail:r.Util.merge(d,v),digest:r.Util.merge(d,g)},b=r.Util.merge({href:{type:"string"}},f),m={nopv:{type:"boolean"}},w={cv_id:{type:"string"}},S=r.Util.merge({origin_query:{type:"string"},result_query:{type:"string"},entities:{type:"array"}},y),_=l.viewStart,O=l.viewEnd,x={};x[_.list]=r.Util.merge(c,s),x[_.detail]=r.Util.merge(c,s),x[_.digest]=r.Util.merge(c,s),x[O.list]=r.Util.merge(c,h.list),x[O.detail]=r.Util.merge(c,h.detail),x[O.digest]=r.Util.merge(c,h.digest),x[l.flow]=r.Util.merge(c,b),x[l.pageview]=r.Util.merge(c,m),x[l.cv]=r.Util.merge(c,w),x[l.search]=r.Util.merge(c,S);var k=x,U=n(1),C=n.n(U),j=function(){return r.Util.getTime()},L=C.a.getPageSession(),T="data-ual",E="data-ual-view-type",P="data-ual-gotocontent",M="data-ual-content-key",A={list:"list",digest:"digest",detail:"detail",internal:"internal"},N=function(e){if(!r.Util.isString(e)||r.Util.isEmpty(e))return[];var t=e.split(":");return[t.shift().trim(),t.join(":").trim()]},I=function(e,t){return!r.Util.isArray(t)||t.length<=1?e:r.Util.isString(t[0])&&!r.Util.isEmpty(t[0])&&r.Util.isString(t[1])?(e[t[0]]=t[1],e):e},D=function(e){var t=r.Util.getType(e);return/^HTML.*Element$/.test(t)},F={isDOMElement:D,isWindow:function(e){return r.Util.is("Window",e)},isDocument:function(e){var t=r.Util.getType(e);return/^(HTML)?Document$/.test(t)},isNavigator:function(e){return null!==r.Util.getType(e).match(/^Navigator$/)},getUALParameters:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!D(e))return{};var n=t||T,o=e.getAttribute(n);return r.Util.isNull(o)?{}:o.split(";").map(N).reduce(I,{})},getViewType:function(e){if(!D(e))return null;var t=e.getAttribute(E);if(!r.Util.isString(t)||r.Util.isEmpty(t))return null;for(var n in A)if(A.hasOwnProperty(n)&&A[n]===t)return t;return null}},R=function(){return F.isDocument(document)?document.URL:null},B=function(){if(!F.isNavigator(navigator))return r.CLog.error("[osName()] navigatorオブジェクトが存在しません"),null;var e=navigator.userAgent,t="other";return e.match(/windows\sphone/i)?t="windowsphone":e.match(/windows/i)?t="windows":e.match(/iphone|ipad/i)?t="ios":e.match(/mac|ppc/i)?t="mac":e.match(/android/i)&&(t="android"),t},H=function(){return F.isDocument(document)?document.referrer:null},q=C.a.getSdkName(),z=C.a.getSdkVersion(),W=n(4),V=W.a,G=W.b;function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"buildCommonParameters",value:function(){return{content_id:null,id_type:null,service:null,apptype:"web",opttype:null,mtestid:null,ss_join_id:null,ss_join_id_type:null,referer:H()}}},{key:"buildActionParameters",value:function(e){return{}}},{key:"buildGlobalParameters",value:function(e){return r.Util.isObject(e)&&r.Util.isFunction(e.getParameters)?e.getParameters():{}}},{key:"buildContentParameters",value:function(e){return r.Util.isObject(e)&&r.Util.isFunction(e.getParameters)?e.getParameters():{}}},{key:"buildFixedParameters",value:function(e,t){return{ts:j(),action_id:e,page_session:L,url:R(),os:B(),sdk:q,sdk_ver:z,extension:V,extension_ver:G}}},{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!r.Util.isObject(this.validator)||!r.Util.isFunction(this.validator.run))return r.CLog.error("[BaseBuilder.run] バリデータが未登録か不正です.",this.validator),null;var o=this.buildCommonParameters(),i=this.buildActionParameters(n),u=this.buildGlobalParameters(t),a=this.buildContentParameters(n),l=this.buildFixedParameters(e,n);r.CLog.debug("[BaseBuilder#run] Parameters:","common = ",o,"action = ",i,"global = ",u,"content = ",a,"fixed = ",l);var c=r.Util.merge(o,i,u,a,l);return this.validator.run(e,c)}}],(n=null)&&$(t.prototype,n),o&&$(t,o),e}();J.validator=null;var Q=J;function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parameters={}}var t,n,r;return t=e,(n=[{key:"addParameter",value:function(e,t){this.parameters[e]=t}},{key:"getParameters",value:function(){return this.parameters}}])&&X(t.prototype,n),r&&X(t,r),e}(),K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.Util.isString(e))return null;var n=l[e];if(r.Util.isString(n))return n;if(!r.Util.isObject(n)||!r.Util.isString(t.viewType))return null;var o=n[t.viewType];return r.Util.isString(o)?o:null};function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={}}var t,n,r;return t=e,(n=[{key:"setToken",value:function(e){"token"in this.config||(this.config.token=e)}},{key:"getToken",value:function(){return"token"in this.config?this.config.token:null}},{key:"setProject",value:function(e){this.config.project=e}},{key:"getProject",value:function(){return"project"in this.config?this.config.project:null}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne={},re=new Y,oe=new ee;oe.setProject("yas_useractionpool");var ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"viewStart",value:function(e){this.dispatch("viewStart",e)}},{key:"viewEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.dispatch("viewEnd",e,t)}},{key:"flow",value:function(e,t){e.setFlowInfo(t),this.dispatch("flow",e),e.unsetFlowInfo()}},{key:"hit",value:function(e,t){this.dispatch(e,t)}},{key:"dispatch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=K(e,t);if(r.Util.isString(o))if(r.Util.isUndefined(ne[o]))r.CLog.error("[LogDispatcher#dispatch] アクションIDに対し適切なビルダーが設定されていません",o);else{var i=ne[o].run(o,re,t);null!==i&&(C.a.send({token:oe.getToken(),project:oe.getProject(),dataset:o,data:i}),!0===n&&C.a.flush())}else r.CLog.error("[LogDispatcher#dispatch] 該当するアクションIDが存在しません",o,t)}},{key:"addBuilder",value:function(e,t){if(!r.Util.isString(e)||r.Util.isEmpty(e))return r.CLog.error("[LogDispatcher#addBuilder] アクションIDには空でない文字列を指定してください","actionId = ".concat(e)),!1;if(!r.Util.isUndefined(ne[e]))return r.CLog.error("[LogDispatcher#addBuilder] 登録済みのアクションIDです.","actionId = ".concat(e)),!1;for(var n=t;null!==n&&(n=Object.getPrototypeOf(n))!==Q;);return t!==Q&&null===n?(r.CLog.error("[LogDispatcher#addBuilder] ビルダーはBaseBuilder, またはそのサブクラスとしてください.","actionId = ".concat(e)),!1):(ne[e]=t,!0)}},{key:"addGlobalData",value:function(e){for(var t in e)e.hasOwnProperty(t)&&re.addParameter(t,e[t])}},{key:"setToken",value:function(e){oe.setToken(e)}},{key:"getToken",value:function(){return oe.getToken()}}],(n=null)&&te(t.prototype,n),o&&te(t,o),e}();function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,ce(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,Q),n=t,o=[{key:"buildActionParameters",value:function(e){var t=e.viewType;return{start_time:e.viewStartTime,end_time:e.viewEndTime,view_time:e.viewEndTime-e.viewStartTime,viewable_time:t===A.list?e.viewableTime:null,view_rate:e.readProportion,current_page:t===A.detail?0:null,total_page:t===A.detail?0:null}}}],(r=null)&&ae(n.prototype,r),o&&ae(n,o),t}();function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,ve(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,Q),n=t,o=[{key:"buildActionParameters",value:function(e){return{href:e.url}}}],(r=null)&&pe(n.prototype,r),o&&pe(n,o),t}();function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),we(this,Se(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,Q),n=t,o=[{key:"buildActionParameters",value:function(e){return{nopv:!1}}}],(r=null)&&me(n.prototype,r),o&&me(n,o),t}();n(36);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ke=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},Ue=function(){var e=r.Util.urlQueryString(R()),t=r.Util.urlQueryParse(e),n=null;return["p","q","query"].some(function(e){if("object"===xe(t)&&t.hasOwnProperty(e))return n=ke(t[e]),!0}),n};function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Le(this,Te(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,Q),n=t,o=[{key:"buildActionParameters",value:function(e){return{origin_query:Ue()}}}],(r=null)&&je(n.prototype,r),o&&je(n,o),t}(),Me=l.viewStart,Ae=l.viewEnd,Ne={};Ne[Me.list]=Q,Ne[Me.detail]=Q,Ne[Me.digest]=Q,Ne[Ae.list]=se,Ne[Ae.detail]=se,Ne[Ae.digest]=se,Ne[l.flow]=he,Ne[l.pageview]=Oe,Ne[l.cv]=Q,Ne[l.search]=Pe;var Ie=Ne,De={tk:"DUMMY_TOKEN",p:"ds_logger",d:"ual_web_error"};function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isActive=!1,this.interval=r.Util.isNumber(t)?t:100}var t,n,o;return t=e,(n=[{key:"monitor",value:function(){return!0}},{key:"runTimer",value:function(){var e=this;this.isActive&&(this.monitor(),setTimeout(function(){e.runTimer()},this.interval))}},{key:"start",value:function(){this.isActive||(this.isActive=!0,this.runTimer())}},{key:"stop",value:function(){this.isActive=!1}}])&&Fe(t.prototype,n),o&&Fe(t,o),e}(),Be=function(){return F.isWindow(window)?{w:innerWidth,h:innerHeight}:{w:0,h:0}},He=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,r:t.right,b:t.bottom,w:t.width,h:t.height}},qe=function(e,t){var n=(t=r.Util.isObject(t)?t:{}).top||0,o=t.bottom||0;return{x:0,y:n,r:e.w,b:e.h-o,w:e.w,h:e.h-n-o}},ze=function(e,t,n,o){if(!F.isWindow(window))return r.CLog.error("[visibility.isHiddenElement] windowオブジェクトが存在しません"),!1;var i=getComputedStyle(e);if("hidden"===i.getPropertyValue("visibility")||"none"===i.getPropertyValue("display"))return!0;var u=qe(t,o);return n.x>=u.r||n.r<=u.x||n.y>=u.b||n.b<=u.y},We=function(e,t,n){var r=qe(e,n),o=Math.max(r.x,t.x),i=Math.min(t.r,r.r),u=Math.max(r.y,t.y),a=Math.min(r.b,t.b);return{x:o,y:u,r:i,b:a,w:i-o,h:a-u}},Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!F.isDOMElement(e))return r.CLog.error("[visibility.getVAP] 不正な引数",e),0;var n=Be(),o=He(e);if(ze(e,n,o,t))return 0;var i=o.w*o.h,u=We(n,o,t);return u.w*u.h/i*100},Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!F.isDOMElement(e))return r.CLog.error("[visibility.getReadRange] 不正な引数",e),null;var n=Be(),o=He(e);if(ze(e,n,o,t))return null;var i=o.y,u=o.h,a=i+u,l=We(n,o,t),c=u/100,f=(l.y-i)/c,s=(u-(a-l.b))/c;return s-f<1?null:{start:Math.ceil(f),end:Math.floor(s)-1}},$e={none:0,start:1,end:2};function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qe=$e,Xe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cp=F.getUALParameters(t),this.mp=F.getUALParameters(n),this.lp={},this.hp={},this.vt=F.getViewType(t),null===this.vt&&r.CLog.error("[ContentDataModel.constructor] 規定外の表示種別",t),this.vap=0,this.vst=0,this.vet=0,this.vast=null,this.vat=this.vt===A.list?0:null,this.rpf=[];for(var o=0;o<100;o++)this.rpf[o]=!1;this.href=null}var t,n,o;return t=e,(n=[{key:"getParameters",value:function(){return r.Util.merge({},this.mp,this.cp,this.lp,this.hp)}},{key:"setHitParameters",value:function(e){this.hp=r.Util.isObject(e)?e:{}}},{key:"setFlowInfo",value:function(e){this.lp=F.getUALParameters(e,P),this.href=e.getAttribute("href")}},{key:"unsetFlowInfo",value:function(){this.lp={},this.href=null}},{key:"update",value:function(e){var t=Qe.none;return r.Util.isNumber(e)?(0===this.vap&&0!==e?(this.vst=r.Util.getTime(),t=Qe.start):0!==this.vap&&0===e&&(this.vet=r.Util.getTime(),t=Qe.end),this.vt===A.list&&(null===this.vast&&e>=50?this.vast=r.Util.getTime():null!==this.vast&&e<50&&(this.vat+=r.Util.getTime()-this.vast,this.vast=null)),this.vap=e,t):(r.CLog.error("[ContentDataModel#update] 可視面積比率の値が不正",e),t)}},{key:"read",value:function(e,t){for(var n=e;n<=t;n++)this.rpf[n]=!0}},{key:"viewType",get:function(){return this.vt}},{key:"viewStartTime",get:function(){return this.vst}},{key:"viewEndTime",get:function(){return this.vet}},{key:"viewableTime",get:function(){return this.vat}},{key:"readProportion",get:function(){return this.rpf.filter(function(e){return e}).length}},{key:"url",get:function(){var e=this.href;return r.Util.isString(e)&&!r.Util.isEmpty(e)?e:null}}])&&Je(t.prototype,n),o&&Je(t,o),e}();function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.top=0,this.bottom=0}var t,n,o;return t=e,(n=[{key:"getOffset",value:function(){return{top:this.top,bottom:this.bottom}}},{key:"setOffset",value:function(e){this.top=r.Util.isObject(e)&&r.Util.isNumber(e.top)?e.top:0,this.bottom=r.Util.isObject(e)&&r.Util.isNumber(e.bottom)?e.bottom:0}}])&&Ye(t.prototype,n),o&&Ye(t,o),e}(),Ze=!1,et=function(e,t){F.isDOMElement(e)&&(Ze?(function(e,t){e.innerHTML="";var n=t.getParameters(),r=n.content_id||n.contid||null;null!==r&&(e.innerHTML+="".concat(r.substr(0,12),"<br>"));var o=t.vap,i=t.readProportion;e.innerHTML+="".concat("".concat(o).substr(0,5),"%<br>ViewRate:").concat(i,"%<br>");var u=t.viewStartTime;null!==u&&(e.innerHTML+="ViewTime:".concat(Math.floor(((new Date).getTime()-u)/1e3),"秒"))}(function(e){var t=e.querySelector(".uainfo");if(null!==t)return t;var n=document.createElement("div");return n.className="uainfo",n.style.position="absolute",n.style.backgroundColor="rgba(0,0,0,0.4)",n.style.color="#FFF",n.style.padding="3px",n.style.left=0,n.fontSize="13pt",n.zIndex="100000",e.appendChild(n),n}(e),t),function(e,t){if(!e.hasAttribute("data-ual-debug-style")){var n={borderColor:e.style.borderColor,borderWidth:e.style.borderWidth,borderStyle:e.style.borderStyle};e.setAttribute("data-ual-debug-style",JSON.stringify(n))}t.vap>0?(e.style.borderColor="red",e.style.borderWidth="1px",e.style.borderStyle="solid"):(e.style.borderColor="rgba(0,0,0,0)",e.style.borderWidth="1px",e.style.borderStyle="solid")}(e,t)):function(e){var t=e.querySelector(".uainfo");null!==t&&e.removeChild(t);var n=e.getAttribute("data-ual-debug-style");if(null!==n){var r=JSON.parse(n);for(var o in r)r.hasOwnProperty(o)&&(e.style[o]=r[o]);e.removeAttribute("data-ual-debug-style")}}(e))},tt=function(){Ze=!0},nt=function(){Ze=!1};function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lt,ct=M,ft=$e,st=function(e,t,n,o,i){var u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=null,l=0,c=i instanceof Ke?i.getOffset():{};F.isDOMElement(t)&&(a=Ge(t,c),l=Ve(t,c)),null!==a&&e.read(a.start,a.end);var f=e.update(l);if(f===ft.start)r.Util.isFunction(n)&&n(e);else if(f===ft.end)return r.Util.isFunction(o)&&o(e,u),null;return et(t,e),e},dt=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=it(this,ut(t).call(this,o))).module=null,!r.Util.isString(e)||r.Util.isEmpty(e))return r.CLog.error("[ContentMonitor.constructor] モジュールIDは空でない文字列で指定してください.",e),it(n);var i=document.getElementById(e);return F.isDOMElement(i)?(n.module=i,n.contentDataMap={},n.startHandler=null,n.endHandler=null,n.offsetData=null,n):(r.CLog.error("[ContentMonitor.constructor] 指定されたモジュールが存在しません.",e),it(n))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,Re),n=t,(o=[{key:"monitor",value:function(){var e=this;if(null===this.module)return!1;var t=this.module.querySelectorAll("[".concat(T,"]")),n=Array.prototype.slice.call(t),o=n.filter(function(e){return e.hasAttribute(ct)}).reduce(function(t,n){return r.Util.merge(t,e.reuseContentData(n))},{}),i=n.filter(function(e){return!e.hasAttribute(ct)}).reduce(function(t,n){return r.Util.merge(t,e.createContentData(n))},{});return this.finalize(),this.contentDataMap=r.Util.merge(o,i),!0}},{key:"flush",value:function(){var e=this;if(null===this.module)return!1;var t=this.module.querySelectorAll("[".concat(T,"]")),n=Array.prototype.slice.call(t).filter(function(e){return e.hasAttribute(ct)}),o=n.reduce(function(t,n){return r.Util.merge(t,e.reuseContentData(n))},{});return n.forEach(function(e){e.removeAttribute(ct)}),this.contentDataMap=o,this.finalize(!0),this.contentDataMap={},!0}},{key:"createContentData",value:function(e){var t={},n=new Xe(e,this.module);if(null===n.viewType)return t;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("").map(function(e){if("x"!==e&&"y"!==e)return e;var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}).join("");return e.setAttribute(ct,r),t[r]=st(n,e,this.startHandler,this.endHandler,this.offsetData),t}},{key:"reuseContentData",value:function(e){var t=e.getAttribute(ct);if(r.Util.isUndefined(this.contentDataMap[t]))return{};var n=this.contentDataMap[t];delete this.contentDataMap[t];var o={};return o[t]=st(n,e,this.startHandler,this.endHandler,this.offsetData),null===o[t]?(e.removeAttribute(ct),{}):o}},{key:"finalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.contentDataMap;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];st(r,null,null,this.endHandler,this.offsetData,e)}}}])&&ot(n.prototype,o),i&&ot(n,i),t}(),pt={isHidden:!1},yt=[],vt=[],gt=["focus","pageshow"],ht=["blur","pagehide","beforeunload","unload"],bt=function(){pt.isHidden&&(yt.forEach(function(e){return e()}),pt.isHidden=!1)},mt=function(){pt.isHidden||(vt.forEach(function(e){return e()}),pt.isHidden=!0)},wt=function(){document[lt]?mt():bt()},St=function(e){r.Util.isFunction(e)&&yt.push(e)},_t=function(e){r.Util.isFunction(e)&&vt.push(e)},Ot=function(){var e;F.isWindow(window)&&F.isDocument(document)&&(gt.forEach(function(e){removeEventListener(e,bt),addEventListener(e,bt,!1)}),ht.forEach(function(e){removeEventListener(e,mt),addEventListener(e,mt,!1)}),r.Util.isUndefined(document.hidden)&&!r.Util.isUndefined(document.webkitHidden)?(lt="webkitHidden",e="webkitvisibilitychange"):(lt="hidden",e="visibilitychange"),document.removeEventListener(e,wt),document.addEventListener(e,wt,!1))},xt=function(){yt.splice(0,yt.length),vt.splice(0,vt.length)},kt=[],Ut=[],Ct=["yjsmhSidebarClose","yjsmhNotificationMenuClose"],jt=["yjsmhSidebarOpen","yjsmhNotificationMenuOpen"],Lt=function(){pt.isHidden&&(kt.forEach(function(e){return e()}),pt.isHidden=!1)},Tt=function(){pt.isHidden||(Ut.forEach(function(e){return e()}),pt.isHidden=!0)},Et=function(e){r.Util.isFunction(e)&&kt.push(e)},Pt=function(e){r.Util.isFunction(e)&&Ut.push(e)},Mt=function(e){r.Util.is("HTMLDivElement",e)&&(Ct.forEach(function(t){e.removeEventListener(t,Lt),e.addEventListener(t,Lt,!1)}),jt.forEach(function(t){e.removeEventListener(t,Tt),e.addEventListener(t,Tt,!1)}))},At=function(){kt.splice(0,kt.length),Ut.splice(0,Ut.length)},Nt=[],It=function(e){for(var t=e.target;t&&!t.hasAttribute(P);)t=t.parentNode;Nt.forEach(function(e){return e(t)})},Dt=function(e){if(F.isDOMElement(e)){var t=e.querySelectorAll("a[".concat(P,"]"));Array.prototype.slice.call(t).forEach(function(e){e.removeEventListener("click",It,!0),e.addEventListener("click",It,!0)})}},Ft=function(e){r.Util.isFunction(e)&&Nt.push(e)},Rt=function(e){r.Util.isArray(e)||(e=[e]),e.forEach(Dt)},Bt=function(){Nt.splice(0,Nt.length)},Ht=function(){if(!F.isWindow(window)||!F.isDocument(document))return r.CLog.error("[util/offset.getOffset] windowまたはdocumentオブジェクトが存在しません"),null;var e=function(){var e=document.body.getElementsByTagName("*"),t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=getComputedStyle(r);"fixed"===o.position&&"none"!==o.display&&"hidden"!==o.visibility&&t.push(r)}return t}(),t=innerWidth/2,n=innerHeight,o=n/2,i=e.map(function(e){return e.getBoundingClientRect()}).filter(function(e){return e.width>t&&e.height>0});return{top:i.filter(function(e){return e.bottom<o}).map(function(e){return e.bottom}).reduce(function(e,t){return Math.max(e,t)},0),bottom:i.filter(function(e){return e.top>o}).map(function(e){return e.top}).reduce(function(e,t){return Math.max(e,n-t)},0)}};function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $t=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Wt(this,Vt(t).call(this,n))).offsetData=new Ke,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(t,Re),n=t,(r=[{key:"monitor",value:function(){var e=Ht();return this.offsetData.setOffset(e),!0}}])&&zt(n.prototype,r),o&&zt(n,o),t}();function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"addModule",value:function(t){var n=e.monitorMap;if(!r.Util.isUndefined(n[t]))return r.CLog.error("[Dispatcher#addModule] 登録済みのモジュールです.",t),!1;var o=new dt(t);return null===o.module?(r.CLog.error("[Dispatcher#addModule] ContentMonitorの生成に失敗しました. モジュールIDを確認してください",t),!1):(o.startHandler=e.handleViewStart,o.endHandler=e.handleViewEnd,o.offsetData=e.offsetMonitor.offsetData,Rt(o.module),n[t]=o,!0)}},{key:"startMonitors",value:function(){null!==ie.getToken()?Xt().forEach(function(e){e.start()}):r.CLog.error("[LogDispatcher#startMonitors] token が未設定です")}},{key:"stopMonitors",value:function(){Xt().forEach(function(e){e.stop(),e.flush()})}},{key:"handleViewStart",value:function(e){ie.viewStart(e)}},{key:"handleViewEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ie.viewEnd(e,t)}},{key:"handleFlow",value:function(t){var n=e.findContentData(t);null!==n?(ie.flow(n,t),e.stopMonitors()):r.CLog.error("[Dispatcher#handleFlow] 対応するコンテンツデータが見つかりません",t)}},{key:"findContentData",value:function(e){for(var t=M,n=e,o=null;r.Util.isEmpty(o)&&F.isDOMElement(n);)o=n.getAttribute(t),n=n.parentNode;return r.Util.isEmpty(o)?null:Xt().reduce(function(e,t){return e||t.contentDataMap[o]||null},null)}},{key:"initMonitors",value:function(){var t=e.monitorMap;for(var n in t)t.hasOwnProperty(n)&&delete t[n];xt(),St(e.startMonitors),_t(e.stopMonitors),Ot(),At(),Et(e.startMonitors),Pt(e.stopMonitors),Mt(document.getElementById("wrapper")),Bt(),Ft(e.handleFlow)}}],(n=null)&&Jt(t.prototype,n),o&&Jt(t,o),e}();Qt.offsetMonitor=new $t,Qt.monitorMap={};var Xt=function(){return function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}(Qt.monitorMap)};Qt.initMonitors();var Yt=Qt;function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var en=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"run",value:function(e){return!r.Util.isString(e)||r.Util.isEmpty(e)?(r.CLog.error("[CtrlCommander.run] サブコマンドの型または値が不正",e,"type: ".concat(Kt(e))),!1):r.Util.isFunction(this[e])?(this[e](),!0):(r.CLog.error("[CtrlCommander.run] 未定義のサブコマンド",e),!1)}},{key:"start",value:function(){Yt.startMonitors()}},{key:"stop",value:function(){Yt.stopMonitors()}}],(n=null)&&Zt(t.prototype,n),o&&Zt(t,o),e}();function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"run",value:function(e){return!r.Util.isString(e)||r.Util.isEmpty(e)?(r.CLog.error("[InitCommander.run] 予期しないモジュールの指定",e),!1):!1!==Yt.addModule(e)||(r.CLog.error("[InitCommander.run] モジュールの登録に失敗しました"),!1)}}],(n=null)&&tn(t.prototype,n),o&&tn(t,o),e}();function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var on=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"run",value:function(e){if(!r.Util.isObject(e))return r.CLog.error("[OffsetCommander#run] 予期しないoptionsの型指定",e),!1;e.auto=!!r.Util.isBoolean(e.auto)&&e.auto,e.interval=r.Util.isNumber(e.interval)&&e.interval>0?e.interval:1e3,e.top=r.Util.isNumber(e.top)?e.top:0,e.bottom=r.Util.isNumber(e.bottom)?e.bottom:0;var t=Yt.offsetMonitor;return e.auto?(t.interval=e.interval,t.start()):(t.stop(),t.offsetData.setOffset({top:e.top,bottom:e.bottom})),!0}}],(n=null)&&rn(t.prototype,n),o&&rn(t,o),e}();function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var an=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"run",value:function(e){return r.Util.isObject(e)?(ie.addGlobalData(e),!0):(r.CLog.error("[GlobalCommander#run] 予期しないパラメータの型指定",e),!1)}}],(n=null)&&un(t.prototype,n),o&&un(t,o),e}();function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!r.Util.isString(e)||r.Util.isEmpty(e)?(r.CLog.error("[ConfigCommander#run] サブコマンドの型または値が不正",e,"type: ".concat(ln(e))),!1):r.Util.isFunction(this[e])?(this[e](t),!0):(r.CLog.error("[ConfigCommander#run] 未定義のサブコマンド",e),!1)}},{key:"token",value:function(e){ie.setToken(e)}}],(n=null)&&cn(t.prototype,n),o&&cn(t,o),e}();function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!r.Util.isString(e)||r.Util.isEmpty(e)?(r.CLog.error("[DebugCommander.run] サブコマンドの型または値が不正",e,"type: ".concat(sn(e))),!1):r.Util.isFunction(this[e])?(this[e](t),!0):(r.CLog.error("[DebugCommander.run] 未定義のサブコマンド",e),!1)}},{key:"start",value:function(){tt()}},{key:"stop",value:function(){nt()}}],(n=null)&&dn(t.prototype,n),o&&dn(t,o),e}();function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"buildContentData",value:function(e){if(!r.Util.isObject(e))return null;var t=document.createElement("li");t.setAttribute("data-ual-view-type",A.internal);var n=new Xe(t);return n.setHitParameters(e),n}},{key:"run",value:function(e,t){var n=this.buildContentData(t);ie.hit(e,n)}}],(n=null)&&yn(t.prototype,n),o&&yn(t,o),e}();function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bn={init:nn,offset:on,ctrl:en,global:an,config:fn,debug:pn,hit:function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"run",value:function(e,t){return!r.Util.isString(e)||r.Util.isEmpty(e)?(r.CLog.error("[HitCommander.run] アクションIDの型または値が不正",e,"type: ".concat(gn(e))),!1):r.Util.isUndefined(t)||r.Util.isNull(t)||r.Util.isObject(t)?(vn.run(e,t),!0):(r.CLog.error("[HitCommander.run] ログパラメータの型または値が不正",t,"type: ".concat(r.Util.getType(t))),!1)}}],(n=null)&&hn(t.prototype,n),o&&hn(t,o),e}()},mn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var o=t[0],i=t.slice(1);if(r.Util.findKey(bn,o)&&r.Util.isFunction(bn[o].run))try{bn[o].run.apply(bn[o],i)}catch(e){var u=r.Util.merge(r.Browser.generateMetrics(e,o),De),a=r.Util.urlQueryBuild(u);r.CLog.warning("[ual] エラーメトリクスの送信を開始します",a)}else r.CLog.warning("[ual] 指定されたコマンドが見つかりません",o)}else r.CLog.warning("[ual] コマンドが指定されていません")};if(r.CLog.prefix="[UAL]",F.isDocument(document)){var wn=document.URL.match(/ualdebug=(\d)/);r.Util.isNull(wn)||(r.CLog.logLevel=r.Util.normalizeToNumber(wn[1]))}for(var Sn in k)k.hasOwnProperty(Sn)&&a.addRuleSet(Sn,k[Sn]);for(var _n in Ie)Ie.hasOwnProperty(_n)&&(Ie[_n].validator=a,ie.addBuilder(_n,Ie[_n]));F.isWindow(window)&&r.Util.isArray(window.ualcmds)&&window.ualcmds.forEach(function(e){var t=Array.prototype.slice.call(e);r.CLog.debug("ual() was called from command queue.",e),mn.apply(null,t)});t.default=mn}]).default});